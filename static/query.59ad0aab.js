import{aj as u,aq as P}from"./entry.a3a05294.js";import{h as m}from"./index.88a927eb.js";import{u as p}from"./preview.69e18d63.js";const $=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,C=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,L=/^([/\\]\s*){2,}[^/\\]/;function S(e,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?$.test(e):C.test(e)||(t.acceptRelative?L.test(e):!1)}const b=/\/$|\/\?|\/#/;function h(e="",t){return t?b.test(e):e.endsWith("/")}function w(e="",t){if(!t)return(h(e)?e.slice(0,-1):e)||"/";if(!h(e,!0))return e||"/";let n=e,s="";const i=e.indexOf("#");i>=0&&(n=e.slice(0,i),s=e.slice(i));const[o,...r]=n.split("?");return(o.slice(0,-1)||"/")+(r.length>0?`?${r.join("?")}`:"")+s}function T(e="",t){if(!t)return e.endsWith("/")?e:e+"/";if(h(e,!0))return e||"/";let n=e,s="";const i=e.indexOf("#");if(i>=0&&(n=e.slice(0,i),s=e.slice(i),!n))return s;const[o,...r]=n.split("?");return o+"/"+(r.length>0?`?${r.join("?")}`:"")+s}function x(e=""){return e.startsWith("/")}function A(e=""){return x(e)?e:"/"+e}function I(e,t){if(v(t)||S(e))return e;const n=w(t);return e.startsWith(n)?e:_(n,e)}function v(e){return!e||e==="/"}function D(e){return e&&e!=="/"}const j=/^\.?\//;function _(e,...t){let n=e||"";for(const s of t.filter(i=>D(i)))if(n){const i=s.replace(j,"");n=T(n)+i}else n=s;return n}const y=(e,t)=>t.split(".").reduce((n,s)=>n&&n[s],e),l=(e,t)=>Object.keys(e).filter(t).reduce((n,s)=>Object.assign(n,{[s]:e[s]}),{}),H=e=>t=>e&&e.length?l(t,n=>!e.includes(n)):t,J=e=>t=>Array.isArray(t)?t.map(n=>e(n)):e(t),E=e=>{const t=[],n=[];for(const s of e)["$","_"].includes(s)?t.push(s):n.push(s);return{prefixes:t,properties:n}},K=(e=[])=>t=>{if(e.length===0||!t)return t;const{prefixes:n,properties:s}=E(e);return l(t,i=>!s.includes(i)&&!n.includes(i[0]))},V=(e=[])=>t=>{if(e.length===0||!t)return t;const{prefixes:n,properties:s}=E(e);return l(t,i=>s.includes(i)||n.includes(i[0]))},Y=(e,t)=>{const n=new Intl.Collator(t.$locale,{numeric:t.$numeric,caseFirst:t.$caseFirst,sensitivity:t.$sensitivity}),s=Object.keys(t).filter(i=>!i.startsWith("$"));for(const i of s)e=e.sort((o,r)=>{const a=[y(o,i),y(r,i)].map(c=>{if(c!==null)return c instanceof Date?c.toISOString():c});return t[i]===-1&&a.reverse(),n.compare(a[0],a[1])});return e},z=(e,t="Expected an array")=>{if(!Array.isArray(e))throw new TypeError(t)},f=e=>Array.isArray(e)?e:[void 0,null].includes(e)?[]:[e],k=["sort","where","only","without"];function q(e,t={}){const n={};for(const r of Object.keys(t.initialParams||{}))n[r]=k.includes(r)?f(t.initialParams[r]):t.initialParams[r];const s=(r,a=c=>c)=>(...c)=>(n[r]=a(...c),o),i=r=>{var a;return t.legacy?r!=null&&r.surround?r.surround:r&&(r!=null&&r.dirConfig&&(r.result={_path:(a=r.dirConfig)==null?void 0:a._path,...r.result,_dir:r.dirConfig}),r!=null&&r._path||Array.isArray(r)||!Object.prototype.hasOwnProperty.call(r,"result")?r:r==null?void 0:r.result):r},o={params:()=>({...n,...n.where?{where:[...f(n.where)]}:{},...n.sort?{sort:[...f(n.sort)]}:{}}),only:s("only",f),without:s("without",f),where:s("where",r=>[...f(n.where),...f(r)]),sort:s("sort",r=>[...f(n.sort),...f(r)]),limit:s("limit",r=>parseInt(String(r),10)),skip:s("skip",r=>parseInt(String(r),10)),find:()=>e(o).then(i),findOne:()=>e(s("first")(!0)).then(i),count:()=>e(s("count")(!0)).then(i),locale:r=>o.where({_locale:r}),withSurround:s("surround",(r,a)=>({query:r,...a})),withDirConfig:()=>s("dirConfig")(!0)};return t.legacy&&(o.findSurround=(r,a)=>o.withSurround(r,a).find().then(i)),o}function R(e){return JSON.stringify(e,B)}function B(e,t){return t instanceof RegExp?`--REGEX ${t.toString()}`:t}const G=e=>{let t=R(e);return t=typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t),t=t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),(t.match(/.{1,100}/g)||[]).join("/")},g=e=>I(e,u().public.content.api.baseURL),M=()=>{throw console.warn("useContent is only accessible when you are using `documentDriven` mode."),console.warn("Learn more by visiting: https://content.nuxt.com/document-driven"),new Error("useContent is only accessible when you are using `documentDriven` mode.")},N=()=>{const{experimental:e}=u().public.content;return e.clientDB?!0:p().isEnabled()},W=()=>async e=>{const{content:t}=u().public,n=e.params(),s=t.experimental.stripQueryParameters?g(`/query/${`${m(n)}.${t.integrity}`}/${G(n)}.json`):g(`/query/${m(n)}.${t.integrity}.json`);if(N())return(await P(()=>import("./client-db.d4d31980.js"),["./client-db.d4d31980.js","./entry.a3a05294.js","./entry.fbf86c79.css","./index.13aa9e49.js","./preview.69e18d63.js","./index.88a927eb.js"],import.meta.url).then(r=>r.useContentDatabase())).fetch(e);const i=await $fetch(s,{method:"GET",responseType:"json",params:t.experimental.stripQueryParameters?void 0:{_params:R(n),previewToken:p().getPreviewToken()}});if(typeof i=="string"&&i.startsWith("<!DOCTYPE html>"))throw new Error("Not found");return i};function Z(e,...t){const{content:n}=u().public,s=q(W(),{initialParams:typeof e!="string"?e:{},legacy:!0});let i;typeof e=="string"&&(i=A(_(e,...t)));const o=s.params;return s.params=()=>{var a,c,d;const r=o();return i&&(r.where=r.where||[],r.first&&(r.where||[]).length===0?r.where.push({_path:w(i)}):r.where.push({_path:new RegExp(`^${i.replace(/[-[\]{}()*+.,^$\s/]/g,"\\$&")}`)})),(a=r.sort)!=null&&a.length||(r.sort=[{_file:1,$numeric:!0}]),n.locales.length&&((d=(c=r.where)==null?void 0:c.find(O=>O._locale))!=null&&d._locale||(r.where=r.where||[],r.where.push({_locale:n.defaultLocale}))),r},s}export{g as a,z as b,f as c,Y as d,G as e,J as f,y as g,K as h,V as i,R as j,_ as k,q as l,I as m,H as o,Z as q,N as s,M as u,T as w};
